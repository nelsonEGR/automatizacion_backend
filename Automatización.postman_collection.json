{
	"info": {
		"_postman_id": "5c6e6ad2-b193-4f7e-8fcb-136ad4852159",
		"name": "Automatización",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "37283765",
		"_collection_link": "https://automatizacion-0267.postman.co/workspace/automatizacion_repositorio~76dd04a2-b625-4bec-afcb-9a9121717944/collection/37283765-5c6e6ad2-b193-4f7e-8fcb-136ad4852159?action=share&source=collection_link&creator=37283765"
	},
	"item": [
		{
			"name": "USUARIOS",
			"item": [
				{
					"name": "CONSULTAR USUARIO",
					"item": [
						{
							"name": "CP-01 - Usuario- Retornar usuario random",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Validación de código 200 OK\", () => {\r",
											"    if (pm.response.code === 200) {\r",
											"        console.log(\"Código correcto: 200 OK\");\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text()); // o pm.response.json() si es JSON\r",
											"        pm.expect(pm.response.code).to.eql(200);\r",
											"    } else {\r",
											"        console.log(`Error: se esperaba 200 pero se recibió ${pm.response.code}`);\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text());\r",
											"        pm.expect(pm.response.code).to.eql(200); // Esto marcará el test como fallido\r",
											"    }\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest({\r",
											"    url: \"https://desa-backend-usuario-api.onrender.com/api/internal/consulta-sql-privada\",\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"X-API-KEY\": \"CLAVE_API_KEY_123456\",\r",
											"        \"Content-Type\": \"text/plain\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: `select u.id_usuario from usuario u where u.estado='1' and u.genero='M' order by RANDOM() limit 1`\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (!err && res.code === 200) {\r",
											"        console.log(\"Consulta ejecutada correctamente\");\r",
											"\r",
											"        let data = res.json();\r",
											"        if (data && data.length > 0) {\r",
											"            // Guardar el nombre en variable de entorno\r",
											"            pm.environment.set(\"id_usuario\", data[0].id_usuario);\r",
											"            console.log(\"id_usuario del SQL:\", data[0].id_usuario);\r",
											"\r",
											"        }\r",
											"    } else {\r",
											"        console.error(\"Error en la consulta SQL\");\r",
											"        if (err) {\r",
											"            console.error(\"Detalles del error:\", err);\r",
											"        }\r",
											"        if (res && res.text) {\r",
											"            console.error(\"Respuesta del servidor:\", res.text());\r",
											"        }\r",
											"    }\r",
											"});\r",
											"\r",
											"pm.environment.set(\"usuarios\", 'api/Usuarios/{{id_usuario}}');"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "apikey",
									"apikey": [
										{
											"key": "value",
											"value": "CLAVE_API_KEY_123456",
											"type": "string"
										},
										{
											"key": "key",
											"value": "X-API-KEY",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseURL}}/{{usuarios}}",
									"host": [
										"{{baseURL}}"
									],
									"path": [
										"{{usuarios}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "CP-02 - Usuario- id_usuario inexistente",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.environment.set(\"id_usuario\", \"12365478\");\r",
											"\r",
											"pm.environment.set(\"usuarios\", 'api/Usuarios/{{id_usuario}}');"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Validación de código 404\", () => {\r",
											"    if (pm.response.code === 404) {\r",
											"        console.log(\"Código correcto: 404 Not Found\");\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text()); // o pm.response.json() si es JSON\r",
											"        pm.expect(pm.response.code).to.eql(404);\r",
											"    } else {\r",
											"        console.log(`Error: se esperaba 404 pero se recibió ${pm.response.code}`);\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text());\r",
											"        pm.expect(pm.response.code).to.eql(404); // Esto marcará el test como fallido\r",
											"    }\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "apikey",
									"apikey": [
										{
											"key": "value",
											"value": "CLAVE_API_KEY_123456",
											"type": "string"
										},
										{
											"key": "key",
											"value": "X-API-KEY",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseURL}}/{{usuarios}}",
									"host": [
										"{{baseURL}}"
									],
									"path": [
										"{{usuarios}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "CP-03 - Usuario- id_usuario tipo string",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.environment.set(\"id_usuario\", \"string\");\r",
											"pm.environment.set(\"usuarios\", 'api/Usuarios/{{id_usuario}}');\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Validación de código 400 OK\", () => {\r",
											"    if (pm.response.code === 400) {\r",
											"        console.log(\"Código correcto: 400 Bad Request\");\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text()); // o pm.response.json() si es JSON\r",
											"        pm.expect(pm.response.code).to.eql(400);\r",
											"    } else {\r",
											"        console.log(`Error: se esperaba 400 pero se recibió ${pm.response.code}`);\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text());\r",
											"        pm.expect(pm.response.code).to.eql(400); // Esto marcará el test como fallido\r",
											"    }\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "apikey",
									"apikey": [
										{
											"key": "value",
											"value": "CLAVE_API_KEY_123456",
											"type": "string"
										},
										{
											"key": "key",
											"value": "X-API-KEY",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseURL}}/{{usuarios}}",
									"host": [
										"{{baseURL}}"
									],
									"path": [
										"{{usuarios}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "CP-04 - Usuario- id_usuario tipo vacio",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.environment.set(\"id_usuario\", \"\");\r",
											"pm.environment.set(\"usuarios\", 'api/Usuarios/{{id_usuario}}');"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Validación de código 200 OK\", () => {\r",
											"    if (pm.response.code === 200) {\r",
											"        console.log(\"Código correcto: 200 OK - retorna todos los usuarios\");\r",
											"        pm.expect(pm.response.code).to.eql(200);\r",
											"    } else {\r",
											"        console.log(`Error: se esperaba 200 pero se recibió ${pm.response.code}`);\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text());\r",
											"        pm.expect(pm.response.code).to.eql(200); // Esto marcará el test como fallido\r",
											"    }\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "apikey",
									"apikey": [
										{
											"key": "value",
											"value": "CLAVE_API_KEY_123456",
											"type": "string"
										},
										{
											"key": "key",
											"value": "X-API-KEY",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseURL}}/{{usuarios}}",
									"host": [
										"{{baseURL}}"
									],
									"path": [
										"{{usuarios}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "ACTIVAR USUARIO",
					"item": [
						{
							"name": "CP-01 - Usuario- Activar usuario random",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest({\r",
											"    url: \"https://desa-backend-usuario-api.onrender.com/api/internal/consulta-sql-privada\",\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"X-API-KEY\": \"CLAVE_API_KEY_123456\",\r",
											"        \"Content-Type\": \"text/plain\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: `select u.id_usuario from usuario u where u.estado='0' order by RANDOM() limit 1`\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (!err && res.code === 200) {\r",
											"        console.log(\"Consulta ejecutada correctamente\");\r",
											"        let data = res.json();\r",
											"        if (data && data.length > 0) {\r",
											"            // Guardar el nombre en variable de entorno\r",
											"            pm.environment.set(\"id_usuario\", data[0].id_usuario);\r",
											"            console.log(\"id_usuario del SQL: inactivo\", data[0].id_usuario);\r",
											"\r",
											"        }\r",
											"    } else {\r",
											"        console.error(\"Error en la consulta SQL\");\r",
											"        if (err) {\r",
											"            console.error(\"Detalles del error:\", err);\r",
											"        }\r",
											"        if (res && res.text) {\r",
											"            console.error(\"Respuesta del servidor:\", res.text());\r",
											"        }\r",
											"    }\r",
											"});\r",
											"\r",
											"pm.environment.set(\"activar_usuario\", 'api/Usuarios/{{id_usuario}}/activar');"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Validación de código 200 OK\", () => {\r",
											"    if (pm.response.code === 200) {\r",
											"        console.log(\"Código correcto: 200 OK\");\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text()); // o pm.response.json() si es JSON\r",
											"        pm.expect(pm.response.code).to.eql(200);\r",
											"    } else {\r",
											"        console.log(`Error: se esperaba 200 pero se recibió ${pm.response.code}`);\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text());\r",
											"        pm.expect(pm.response.code).to.eql(200); // Esto marcará el test como fallido\r",
											"    }\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "apikey",
									"apikey": [
										{
											"key": "value",
											"value": "CLAVE_API_KEY_123456",
											"type": "string"
										},
										{
											"key": "key",
											"value": "X-API-KEY",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"url": {
									"raw": "{{baseURL}}/{{activar_usuario}}",
									"host": [
										"{{baseURL}}"
									],
									"path": [
										"{{activar_usuario}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "DESACTIVAR USUARIO",
					"item": []
				},
				{
					"name": "INSERTAR USUARIO",
					"item": []
				}
			]
		},
		{
			"name": "CIUDADES",
			"item": [
				{
					"name": "CONSULTAR CIUDAD",
					"item": [
						{
							"name": "CP-01 - Ciudades - Retornar ciudad random",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest({\r",
											"    url: \"https://desa-backend-usuario-api.onrender.com/api/internal/consulta-sql-privada\",\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"X-API-KEY\": \"CLAVE_API_KEY_123456\",\r",
											"        \"Content-Type\": \"text/plain\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: `select c.id_ciudad,c.id_departamento from ciudades c ORDER BY RANDOM() LIMIT 1`\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (!err) {\r",
											"        let data = res.json();\r",
											"        if (data && data.length > 0) {\r",
											"            // Guardar el nombre en variable de entorno\r",
											"            pm.environment.set(\"id_ciudad\", data[0].id_ciudad);\r",
											"            pm.environment.set(\"id_departamento\", data[0].id_departamento);\r",
											"        }\r",
											"    }\r",
											"});\r",
											"////\r",
											"\r",
											"\r",
											"pm.environment.set(\"ciudad_paraguay\", 'api/Ciudades?id_departamento={{id_departamento}}&id_ciudad={{id_ciudad}}');"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Validación de código 200 OK\", () => {\r",
											"    if (pm.response.code === 200) {\r",
											"        console.log(\"Código correcto: 200 OK\");\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text()); // o pm.response.json() si es JSON\r",
											"        pm.expect(pm.response.code).to.eql(200);\r",
											"    } else {\r",
											"        console.log(`Error: se esperaba 200 pero se recibió ${pm.response.code}`);\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text());\r",
											"        pm.expect(pm.response.code).to.eql(200); // Esto marcará el test como fallido\r",
											"    }\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "apikey",
									"apikey": [
										{
											"key": "value",
											"value": "CLAVE_API_KEY_123456",
											"type": "string"
										},
										{
											"key": "key",
											"value": "X-API-KEY",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseURL}}/{{ciudad_paraguay}}",
									"host": [
										"{{baseURL}}"
									],
									"path": [
										"{{ciudad_paraguay}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "CP-02 - Ciudades - Retornar todas las ciudades",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.environment.set(\"id_ciudad\", \"\");\r",
											"pm.environment.set(\"id_departamento\", \"\");\r",
											"\r",
											"pm.environment.set(\"ciudad_paraguay\", 'api/Ciudades?id_departamento={{id_departamento}}&id_ciudad={{id_ciudad}}');"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Validación de código 200 OK\", () => {\r",
											"    if (pm.response.code === 200) {\r",
											"        console.log(\"Código correcto: 200 OK\"); // o pm.response.json() si es JSON\r",
											"        pm.expect(pm.response.code).to.eql(200);\r",
											"    } else {\r",
											"        console.log(`Error: se esperaba 200 pero se recibió ${pm.response.code}`);\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text());\r",
											"        pm.expect(pm.response.code).to.eql(200); // Esto marcará el test como fallido\r",
											"    }\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "apikey",
									"apikey": [
										{
											"key": "value",
											"value": "CLAVE_API_KEY_123456",
											"type": "string"
										},
										{
											"key": "key",
											"value": "X-API-KEY",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseURL}}/{{ciudad_paraguay}}",
									"host": [
										"{{baseURL}}"
									],
									"path": [
										"{{ciudad_paraguay}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "CP-03 - Ciudades - Retornar todas las ciudades por departamento",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest({\r",
											"    url: \"https://desa-backend-usuario-api.onrender.com/api/internal/consulta-sql-privada\",\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"X-API-KEY\": \"CLAVE_API_KEY_123456\",\r",
											"        \"Content-Type\": \"text/plain\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: `select c.id_ciudad,c.id_departamento from ciudades c ORDER BY RANDOM() LIMIT 1`\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (!err) {\r",
											"        let data = res.json();\r",
											"        if (data && data.length > 0) {\r",
											"            // Guardar el nombre en variable de entorno\r",
											"            pm.environment.set(\"id_ciudad\", \"\");\r",
											"            pm.environment.set(\"id_departamento\", data[0].id_departamento);\r",
											"        }\r",
											"    }\r",
											"});\r",
											"////\r",
											"\r",
											"\r",
											"pm.environment.set(\"ciudad_paraguay\", 'api/Ciudades?id_departamento={{id_departamento}}&id_ciudad={{id_ciudad}}');"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Validación de código 200 OK\", () => {\r",
											"    if (pm.response.code === 200) {\r",
											"        console.log(\"Código correcto: 200 OK\");\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text()); // o pm.response.json() si es JSON\r",
											"        pm.expect(pm.response.code).to.eql(200);\r",
											"    } else {\r",
											"        console.log(`Error: se esperaba 200 pero se recibió ${pm.response.code}`);\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text());\r",
											"        pm.expect(pm.response.code).to.eql(200); // Esto marcará el test como fallido\r",
											"    }\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "apikey",
									"apikey": [
										{
											"key": "value",
											"value": "CLAVE_API_KEY_123456",
											"type": "string"
										},
										{
											"key": "key",
											"value": "X-API-KEY",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseURL}}/{{ciudad_paraguay}}",
									"host": [
										"{{baseURL}}"
									],
									"path": [
										"{{ciudad_paraguay}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "CP-04 - Ciudades - id_departamento string",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest({\r",
											"    url: \"https://desa-backend-usuario-api.onrender.com/api/internal/consulta-sql-privada\",\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"X-API-KEY\": \"CLAVE_API_KEY_123456\",\r",
											"        \"Content-Type\": \"text/plain\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: `select c.id_ciudad,c.id_departamento from ciudades c ORDER BY RANDOM() LIMIT 1`\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (!err) {\r",
											"        let data = res.json();\r",
											"        if (data && data.length > 0) {\r",
											"            // Guardar el nombre en variable de entorno\r",
											"            pm.environment.set(\"id_ciudad\", data[0].id_ciudad);\r",
											"            pm.environment.set(\"id_departamento\", \"string\");\r",
											"\r",
											"        }\r",
											"    }\r",
											"});\r",
											"////\r",
											"\r",
											"\r",
											"pm.environment.set(\"ciudad_paraguay\", 'api/Ciudades?id_departamento={{id_departamento}}&id_ciudad={{id_ciudad}}');"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Validación de código 400 OK\", () => {\r",
											"    if (pm.response.code === 400) {\r",
											"        console.log(\"Código correcto: 400 Bad Request\");\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text()); // o pm.response.json() si es JSON\r",
											"        pm.expect(pm.response.code).to.eql(400);\r",
											"    } else {\r",
											"        console.log(`Error: se esperaba 400 pero se recibió ${pm.response.code}`);\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text());\r",
											"        pm.expect(pm.response.code).to.eql(400); // Esto marcará el test como fallido\r",
											"    }\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "apikey",
									"apikey": [
										{
											"key": "value",
											"value": "CLAVE_API_KEY_123456",
											"type": "string"
										},
										{
											"key": "key",
											"value": "X-API-KEY",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseURL}}/{{ciudad_paraguay}}",
									"host": [
										"{{baseURL}}"
									],
									"path": [
										"{{ciudad_paraguay}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "CP-05 - Ciudades - id_departamento inexistente",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest({\r",
											"    url: \"https://desa-backend-usuario-api.onrender.com/api/internal/consulta-sql-privada\",\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"X-API-KEY\": \"CLAVE_API_KEY_123456\",\r",
											"        \"Content-Type\": \"text/plain\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: `select c.id_ciudad,c.id_departamento from ciudades c ORDER BY RANDOM() LIMIT 1`\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (!err) {\r",
											"        let data = res.json();\r",
											"        if (data && data.length > 0) {\r",
											"            // Guardar el nombre en variable de entorno\r",
											"            pm.environment.set(\"id_ciudad\", data[0].id_ciudad);\r",
											"            pm.environment.set(\"id_departamento\", \"150254\");\r",
											"        }\r",
											"    }\r",
											"});\r",
											"////\r",
											"\r",
											"\r",
											"pm.environment.set(\"ciudad_paraguay\", 'api/Ciudades?id_departamento={{id_departamento}}&id_ciudad={{id_ciudad}}');"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Validación de código 400 OK\", () => {\r",
											"    if (pm.response.code === 400) {\r",
											"        console.log(\"Código correcto: 400 Bad Request\");\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text()); // o pm.response.json() si es JSON\r",
											"        pm.expect(pm.response.code).to.eql(400);\r",
											"    } else {\r",
											"        console.log(`Error: se esperaba 400 pero se recibió ${pm.response.code}`);\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text());\r",
											"        pm.expect(pm.response.code).to.eql(400); // Esto marcará el test como fallido\r",
											"    }\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "apikey",
									"apikey": [
										{
											"key": "value",
											"value": "CLAVE_API_KEY_123456",
											"type": "string"
										},
										{
											"key": "key",
											"value": "X-API-KEY",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseURL}}/{{ciudad_paraguay}}",
									"host": [
										"{{baseURL}}"
									],
									"path": [
										"{{ciudad_paraguay}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "CP-06 - Ciudades - id_departamento null",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest({\r",
											"    url: \"https://desa-backend-usuario-api.onrender.com/api/internal/consulta-sql-privada\",\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"X-API-KEY\": \"CLAVE_API_KEY_123456\",\r",
											"        \"Content-Type\": \"text/plain\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: `select c.id_ciudad,c.id_departamento from ciudades c ORDER BY RANDOM() LIMIT 1`\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (!err) {\r",
											"        let data = res.json();\r",
											"        if (data && data.length > 0) {\r",
											"            // Guardar el nombre en variable de entorno\r",
											"            pm.environment.set(\"id_ciudad\", data[0].id_ciudad);\r",
											"            pm.environment.set(\"id_departamento\", \"null\");\r",
											"\r",
											"        }\r",
											"    }\r",
											"});\r",
											"////\r",
											"\r",
											"\r",
											"pm.environment.set(\"ciudad_paraguay\", 'api/Ciudades?id_departamento={{id_departamento}}&id_ciudad={{id_ciudad}}');"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Validación de código 400 OK\", () => {\r",
											"    if (pm.response.code === 400) {\r",
											"        console.log(\"Código correcto: 400 Bad Request\");\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text()); // o pm.response.json() si es JSON\r",
											"        pm.expect(pm.response.code).to.eql(400);\r",
											"    } else {\r",
											"        console.log(`Error: se esperaba 400 pero se recibió ${pm.response.code}`);\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text());\r",
											"        pm.expect(pm.response.code).to.eql(400); // Esto marcará el test como fallido\r",
											"    }\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "apikey",
									"apikey": [
										{
											"key": "value",
											"value": "CLAVE_API_KEY_123456",
											"type": "string"
										},
										{
											"key": "key",
											"value": "X-API-KEY",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseURL}}/{{ciudad_paraguay}}",
									"host": [
										"{{baseURL}}"
									],
									"path": [
										"{{ciudad_paraguay}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "CP-07 - Ciudades - id_ciudad string",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest({\r",
											"    url: \"https://desa-backend-usuario-api.onrender.com/api/internal/consulta-sql-privada\",\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"X-API-KEY\": \"CLAVE_API_KEY_123456\",\r",
											"        \"Content-Type\": \"text/plain\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: `select c.id_ciudad,c.id_departamento from ciudades c ORDER BY RANDOM() LIMIT 1`\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (!err) {\r",
											"        let data = res.json();\r",
											"        if (data && data.length > 0) {\r",
											"            // Guardar el nombre en variable de entorno\r",
											"            pm.environment.set(\"id_ciudad\",\"string\");\r",
											"            pm.environment.set(\"id_departamento\", data[0].id_departamento);\r",
											"        }\r",
											"    }\r",
											"});\r",
											"////\r",
											"\r",
											"\r",
											"pm.environment.set(\"ciudad_paraguay\", 'api/Ciudades?id_departamento={{id_departamento}}&id_ciudad={{id_ciudad}}');"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Validación de código 400 OK\", () => {\r",
											"    if (pm.response.code === 400) {\r",
											"        console.log(\"Código correcto: 400 Bad Request\");\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text()); // o pm.response.json() si es JSON\r",
											"        pm.expect(pm.response.code).to.eql(400);\r",
											"    } else {\r",
											"        console.log(`Error: se esperaba 400 pero se recibió ${pm.response.code}`);\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text());\r",
											"        pm.expect(pm.response.code).to.eql(400); // Esto marcará el test como fallido\r",
											"    }\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "apikey",
									"apikey": [
										{
											"key": "value",
											"value": "CLAVE_API_KEY_123456",
											"type": "string"
										},
										{
											"key": "key",
											"value": "X-API-KEY",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseURL}}/{{ciudad_paraguay}}",
									"host": [
										"{{baseURL}}"
									],
									"path": [
										"{{ciudad_paraguay}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "CP-08 - Ciudades - id_ciudad inexistente",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest({\r",
											"    url: \"https://desa-backend-usuario-api.onrender.com/api/internal/consulta-sql-privada\",\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"X-API-KEY\": \"CLAVE_API_KEY_123456\",\r",
											"        \"Content-Type\": \"text/plain\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: `select c.id_ciudad,c.id_departamento from ciudades c ORDER BY RANDOM() LIMIT 1`\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (!err) {\r",
											"        let data = res.json();\r",
											"        if (data && data.length > 0) {\r",
											"            // Guardar el nombre en variable de entorno\r",
											"            pm.environment.set(\"id_ciudad\", \"123456\");\r",
											"            pm.environment.set(\"id_departamento\", data[0].id_departamento);\r",
											"        }\r",
											"    }\r",
											"});\r",
											"////\r",
											"\r",
											"\r",
											"pm.environment.set(\"ciudad_paraguay\", 'api/Ciudades?id_departamento={{id_departamento}}&id_ciudad={{id_ciudad}}');"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Validación de código 400 OK\", () => {\r",
											"    if (pm.response.code === 400) {\r",
											"        console.log(\"Código correcto: 400 Bad Request\");\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text()); // o pm.response.json() si es JSON\r",
											"        pm.expect(pm.response.code).to.eql(400);\r",
											"    } else {\r",
											"        console.log(`Error: se esperaba 400 pero se recibió ${pm.response.code}`);\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text());\r",
											"        pm.expect(pm.response.code).to.eql(400); // Esto marcará el test como fallido\r",
											"    }\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "apikey",
									"apikey": [
										{
											"key": "value",
											"value": "CLAVE_API_KEY_123456",
											"type": "string"
										},
										{
											"key": "key",
											"value": "X-API-KEY",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseURL}}/{{ciudad_paraguay}}",
									"host": [
										"{{baseURL}}"
									],
									"path": [
										"{{ciudad_paraguay}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "CP-09 - Ciudades - id_ciudad null",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest({\r",
											"    url: \"https://desa-backend-usuario-api.onrender.com/api/internal/consulta-sql-privada\",\r",
											"    method: \"POST\",\r",
											"    header: {\r",
											"        \"X-API-KEY\": \"CLAVE_API_KEY_123456\",\r",
											"        \"Content-Type\": \"text/plain\"\r",
											"    },\r",
											"    body: {\r",
											"        mode: \"raw\",\r",
											"        raw: `select c.id_ciudad,c.id_departamento from ciudades c ORDER BY RANDOM() LIMIT 1`\r",
											"    }\r",
											"}, function (err, res) {\r",
											"    if (!err) {\r",
											"        let data = res.json();\r",
											"        if (data && data.length > 0) {\r",
											"            // Guardar el nombre en variable de entorno\r",
											"            pm.environment.set(\"id_ciudad\", \"null\");\r",
											"            pm.environment.set(\"id_departamento\", data[0].id_departamento);\r",
											"        }\r",
											"    }\r",
											"});\r",
											"////\r",
											"\r",
											"\r",
											"pm.environment.set(\"ciudad_paraguay\", 'api/Ciudades?id_departamento={{id_departamento}}&id_ciudad={{id_ciudad}}');"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Validación de código 400 OK\", () => {\r",
											"    if (pm.response.code === 400) {\r",
											"        console.log(\"Código correcto: 400 Bad Request\");\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text()); // o pm.response.json() si es JSON\r",
											"        pm.expect(pm.response.code).to.eql(400);\r",
											"    } else {\r",
											"        console.log(`Error: se esperaba 400 pero se recibió ${pm.response.code}`);\r",
											"        console.log(\"Body:\");\r",
											"        console.log(pm.response.text());\r",
											"        pm.expect(pm.response.code).to.eql(400); // Esto marcará el test como fallido\r",
											"    }\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "apikey",
									"apikey": [
										{
											"key": "value",
											"value": "CLAVE_API_KEY_123456",
											"type": "string"
										},
										{
											"key": "key",
											"value": "X-API-KEY",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseURL}}/{{ciudad_paraguay}}",
									"host": [
										"{{baseURL}}"
									],
									"path": [
										"{{ciudad_paraguay}}"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					"pm.collectionVariables.set(\"baseURL\", 'https://desa-backend-usuario-api.onrender.com');"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseURL",
			"value": ""
		}
	]
}